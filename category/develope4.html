<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="description" content="与互联网、编程、计算机有关的个人博客。" />
  <meta name="keywords" content="编程,程序员,Python,C,JAVA" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hackecho</title>
  <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <link rel="stylesheet" href="theme/css/styles.min.css?2a1fc9d5">

  <link rel="shortcut icon" type="image/png" href="http://www.gravatar.com/avatar/44a1e675878445f1bdea9686cb091197.png" />
  </head>
<body>
<header class="main-header">
  <a href="http://github.com/zlmoment">
<img style="position: absolute; top: 0; left: 128px; border: 0; height: 119px;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
  <hgroup>
    <div>
      <img src="http://www.gravatar.com/avatar/44a1e675878445f1bdea9686cb091197.png" style="margin-left: 34px; margin-top: 30px;">
    </div>
    <h1><a href=http://hackecho.com id="home-link">Hackecho</a></h1>
    <h2>Software engineer, Pythonista and Love Wed.</h2>
  </hgroup>
  <nav>
    <ul class="main-nav">
      
            <li><a href="/archives.html">Archives</a></li>
      
      
                    <li><a href="http://hackecho.com/pages/projects.html">Projects</a></li>
              <li><a href="http://hackecho.com/pages/ideas.html">Ideas</a></li>
              <li><a href="http://hackecho.com/pages/about.html">About</a></li>
              <li><a href="http://hackecho.com/pages/links.html">Links</a></li>
              <li><a href="http://hackecho.com/pages/guestbook.html">Guestbook</a></li>
              

    </ul>
  </nav>
  <a href="http://pelican.notmyidea.org" class="fork-me">Powered by Pelican.</a>

</header>
<section class="main-section blog-section" id="blog-posts">
    <h3 class="date">Sun 29 January 2012</h3>
    <article>
	<hgroup>
	<h2><a href="2012/01/git-notes/" title="Permalink to Git 学习笔记">Git 学习笔记</a></h2>
	
	</hgroup>
	<p>学习Git的笔记，会不定期更新。</p>
<p>我的Github地址：<a href="https://github.com/uutroy">https://github.com/uutroy</a></p>
<p>首先推荐两篇非常好的入门：</p>
<ul>
<li>
<p><a href="http://gitimmersion.com/">Git Immersion</a></p>
</li>
<li>
<p><a href="http://www.ralfebert.de/tutorials/git/#commit_a">Git Tutorial</a></p>
</li>
</ul>
<p>一般流程：取代码 → 更新到最新版本 → 修改代码 → 提交</p>
<h2>Creating a new repository</h2>
<blockquote>
<p>$ git init</p>
</blockquote>
<h2>取代码及修改全局设置</h2>
<p>git在创建提交的时候会记录你的名字和email地址，所以你应该告诉git这些内容。可以使用’git config’命令来设置，如果传递参数’-global’ ，它会将这些值记录在~/.gitconfig文件里，作为这些配置的默认值。</p>
<p>设置用户名与邮箱</p>
<blockquote>
<p>git config –global user.name “name”</p>
</blockquote>
<p>git config –global user.email “username@email.com ...</p>
	<div><a href="http://hackecho.com/2012/01/git-notes/">Read More...</a></div>
	</article>
  <h3 class="date">Tue 24 January 2012</h3>
    <article>
	<hgroup>
	<h2><a href="2012/01/the-zen-of-python/" title="Permalink to Python之禅 - The Zen of Python">Python之禅 - The Zen of Python</a></h2>
	
	</hgroup>
	<p>初入门Python，在学习Django的数据库操作时被告知，Django在选择所有数据时不是用的SELECT * ，而是会显式地列出所有字段，原因是这样会加快查询速度，同时遵循了Python的一个信条：明确比不明确好。那么Python的这些信条(Zen)到底都有哪些呢，我们来看一下。</p>
<p><strong>在Python Shell中输入 import this 就可以打开The Zen of Python了</strong>，下面是主要内容：</p>
<h2>The Zen of Python, by Tim Peters</h2>
<ul>
<li>
<p>Beautiful is better than ugly.</p>
</li>
<li>
<p>Explicit is better than implicit.</p>
</li>
<li>
<p>Simple is better than complex.</p>
</li>
<li>
<p>Complex is better than complicated.</p>
</li>
<li>
<p>Flat is better ...</p></li></ul>
	<div><a href="http://hackecho.com/2012/01/the-zen-of-python/">Read More...</a></div>
	</article>
  <h3 class="date">Sat 14 January 2012</h3>
    <article>
	<hgroup>
	<h2><a href="2012/01/solution-to-need-of-ftp-account-in-wordpress/" title="Permalink to Wordpress提示填写FTP信息的解决办法">Wordpress提示填写FTP信息的解决办法</a></h2>
	
	</hgroup>
	<p>在上一篇文章《<a href="http://www.hackecho.com/archives/710.html">VPS折腾记</a>》中提到在升级Wordpress或添加删除主题和插件的时候需要填写FTP账户信息的问题，提示一般如下：</p>
<blockquote>
<p>要执行请求的操作，WordPress 需要访问您网页服务器的权限。 请输入您的 FTP 登录凭据以继续。 如果您忘记了您的登录凭据（如用户名、密码），请联系您的网站托管商。</p>
</blockquote>
<p>一般情况下，虚拟主机很少会出现这样的情况，如果使用 VPS 的话，这种情况就会比较多。主要原因是网站服务器运行PHP的用户和Wordpress文件夹的所有者不一样，目的就是为了安全，Wordpress在升级时会创建一个临时文件看看owner是不是和当前运行的PHP是否一样，如果不一样，就会出现这个界面。</p>
<p>第一种解决办法很简单，就是直接在wp-config.php 中加入FTP的配置代码：</p>
<div class="codehilite"><pre><span class="c1">// ** FTP SETTINGS FOR AUTO-UPDATE ** //</span>
<span class="n">define</span><span class="p">(</span><span class="err">‘</span><span class="no">FTP_HOST</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">localhost</span><span class="err">’</span><span class="p">);</span>
<span class="n">define</span><span class="p">(</span><span class="err">‘</span><span class="no">FTP_USER</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">ftp</span><span class="err">帐号’</span><span class="p">);</span>
<span class="n">define</span><span class="p">(</span><span class="err">‘</span><span class="no">FTP_PASS</span><span class="err">’</span><span class="p">,</span> <span class="err">‘</span><span class="n">ftp</span><span class="err">密码’</span><span class="p">);</span>
</pre></div>


<p>当然我们更想从根本上解决问题，那么第二种个方法，就要从用户组下手了。</p>
<p>针对有高级管理权限的用户，如服务器或 VPS ...</p>
	<div><a href="http://hackecho.com/2012/01/solution-to-need-of-ftp-account-in-wordpress/">Read More...</a></div>
	</article>
  <h3 class="date">Sat 14 January 2012</h3>
    <article>
	<hgroup>
	<h2><a href="2012/01/vps-struggle/" title="Permalink to VPS折腾记">VPS折腾记</a></h2>
	
	</hgroup>
	<p>实在不爽虚拟主机的性能问题和每天几十封宕机警告，而且主机的一切环境都是虚拟主机商配置好的，没有自由发挥的余地。于是果断决定给博客找个好点的VPS，也为以后博客改版做准备。当然，还有VPN哈哈。</p>
<p>因为Linode VPS口碑还不错，而且支持ipv6，所以就选它了。折腾了整整一下午一晚上，终于把小博客搬了过来，简单总结一下整个过程以备忘。</p>
<h2>SSH登陆</h2>
<p>在Windows上，可以使用Putty来使用SSH。在Mac上，可以直接使用Terminal。命令很简单：</p>
<blockquote>
<p>ssh username@server -p portNumber</p>
</blockquote>
<p>后面的-p portNumber只在主机不是使用标准端口时需要加上，使用时将username和server替换成自己的用户名和地址就可以了。</p>
<h2>安装LNMP</h2>
<p>网上普遍说LNMP比LAMP性能要好，虽然我这个小博客也没多少流量，但无折腾不生活，趁年轻多折腾折腾。</p>
<p>可以选择自己一个一个配置，也可以选择<a href="http://lnmp.org/">LNMP一键安装包</a>。当然折腾的前提是要稍微熟悉它，所以暂时用一键安装包了。官方给出了详细的安装步骤（见<a href="http://lnmp.org/install.html">这里</a>），这里就不再赘述。对于安装中遇到的各种问题，请看本文第五部分。</p>
<p>安装完后记住将Nginx和PHP升级到最新版，安装包中的不是最新版。</p>
<h2>安装Wordpress</h2>
<p>不知为何，按照LNMP官方教程安装VSFTPD总是不成功，于是放弃之安装了PureFTPd ...</p>
	<div><a href="http://hackecho.com/2012/01/vps-struggle/">Read More...</a></div>
	</article>
  <h3 class="date">Fri 23 December 2011</h3>
    <article>
	<hgroup>
	<h2><a href="2011/12/insert-csdn-user-account-info-into-database-with-php/" title="Permalink to 使用PHP将CSDN泄露数据导入数据库">使用PHP将CSDN泄露数据导入数据库</a></h2>
	
	</hgroup>
	<p>有幸得到了CSDN泄露的600多万条用户数据，这可是做大容量数据测试和分析的好材料啊。但虽然是.sql文件，里面却是以纯文本保存的所有数据，而且以固定格式保存。这对于数据存储来讲没有任何问题，但如此大的纯文本文件，检索起来可就不是一般的慢啊（不信你拉一下滚动条试试，准死）！今天正好看到好友异泪在用Java写个小程序想将这些数据导入到MySQL里，于是索性也用PHP实现一个，正好借机对比一下PHP和Java的数据处理性能问题。</p>
<p>原理很简单，因为原文件中每行保存一个用户，而且用户名、密码和邮箱之间都是以“#”分隔的，这样的话操作起来非常方便。</p>
<p>Let's begin!</p>
<h3><strong>执行环境：</strong></h3>
<div class="codehilite"><pre><span class="n">Mac</span> <span class="n">OS</span> <span class="n">X</span> <span class="n">Lion</span> 10<span class="p">.</span>7<span class="p">.</span>2 <span class="o">|</span> 2<span class="p">.</span>8 <span class="n">GHz</span> <span class="n">Intel</span> <span class="n">Core</span> <span class="n">i7</span> <span class="o">|</span> 4 <span class="n">GB</span> 1333 <span class="n">MHz</span> <span class="n">DDR3</span>
<span class="n">PHP</span> 5<span class="p">.</span>3<span class="p">.</span>1 <span class="o">|</span> <span class="n">MySQL</span> 5<span class="p">.</span>1<span class="p">.</span>44 ...</pre></div>
	<div><a href="http://hackecho.com/2011/12/insert-csdn-user-account-info-into-database-with-php/">Read More...</a></div>
	</article>
  <h3 class="date">Sun 11 December 2011</h3>
    <article>
	<hgroup>
	<h2><a href="2011/12/journal-writing-and-programming/" title="Permalink to [转] 旅行，写作，编程">[转] 旅行，写作，编程</a></h2>
	
	</hgroup>
	<p>感谢外刊IT评论翻译这篇文章，原文地址：<a href="http://www.aqee.net/traveling-writing-programming/">《旅行，写作，编程》</a> ，转载请注明原作者地址。</p>
<p>概括起来，今年到目前为止，我所做的事情包括：</p>
<ul>
<li>
<p>花了10个月的时间做世界环游，途经非洲，东南亚，澳洲，中南美洲里的17个国家和地区。这次旅行的主题就是冲浪和摄影。</p>
</li>
<li>
<p>出席在香港，日本，美国和伦敦举行的会议</p>
</li>
<li>
<p>启程时给O’Reilly出版公司写了一本书，书名叫做《<a href="http://bit.ly/uFbFJR">JavaScript Web Applications</a>》</p>
</li>
<li>
<p>另外写了一本关于<a href="http://arcturo.github.com/library/coffeescript/">CoffeeScript</a>的书，很快就会由O’Reilly公司出版。</p>
</li>
<li>
<p>写了大量的开源库，例如<a href="http://spinejs.com/">Spine</a>, <a href="https://spinejs.com/mobile">Spine.Mobile</a>, <a href="http://maccman.github.com/gfx">GFX</a>, 和 <a href="http://github.com/maccman/juggernaut">Juggernaut</a>.</p>
</li>
<li>
<p>筹划了一个创业公司的框架</p>
</li>
<li>
<p>出席伦敦2011<a href="http://futureofwebapps.com/london-2011/">FOWA</a>会议</p>
</li>
<li>
<p>最后，我在<a href="https://twitter.com/about/employees">Twitter</a>公司找到了一份工作</p>
</li>
</ul>
<p>那么，让我从一年前开始，那是2010年9月，我刚好从一个我合作创办的公司里出来，尽管这段经历是很有价值的 ...</p>
	<div><a href="http://hackecho.com/2011/12/journal-writing-and-programming/">Read More...</a></div>
	</article>
  <h3 class="date">Sat 19 November 2011</h3>
    <article>
	<hgroup>
	<h2><a href="2011/11/thinking-of-multi-level-classification/" title="Permalink to 关于多级分类的一个思考">关于多级分类的一个思考</a></h2>
	
	</hgroup>
	<p>最近做的几个项目都设计到了多级分类，不太清楚数据表怎样设计。经过一番探究后，发现一般有以下几种解决方案：</p>
<ul>
<li>
<p>每级分类一张表</p>
</li>
<li>
<p>只有一张分类表</p>
</li>
<li>
<p>一张分类名称表+一张分类关系表</p>
</li>
</ul>
<p>第三种方法是参考了Wordpress本身的分类方法，个人感觉用在手里的项目中有点大材小用，于是主要目标是在前两种中选择一种。</p>
<p>首先来看第一种，这是一般最先想到的方法，而且相对比较简单。但马上一想就会发现这种方法的弊端，如果只有两级分类还可以凑合，但如果涉及到多级分类或无限极分类就麻烦了，如果是五级分类就会有五张表，这明显不以维护而且不符合数据库设计原则。</p>
<p>再来看第二种方案：</p>
<p>如果只有一张表，那么我们必须能够标识各个分类之间的层次关系，层级等级。第一次的设计是这样的：</p>
<blockquote>
<p>cid</p>
<p>cname（分类名称）</p>
<p>parentcid（上级分类ID）</p>
<p>cat_level（当前分类层次）</p>
</blockquote>
<p>貌似很完美的样子，而且支持无限级分类。但在使用过程中发现一个问题：虽然有一个分类层次，但排序后它们的层次还是无法直接显示出来。（在其中一个项目中曾经使用过这种方法，当时的解决方案是在View层又加了一次排序来动态的生成HTML代码，每次排序都要遍历一次父类，很恐怖。）。于是，第二次设计修改如下：</p>
<blockquote>
<p>cid</p>
<p>cname（分类名称）</p>
<p>parentcid（上级分类ID）</p>
<p>cat_level（当前分类层次）</p>
<p>cat_path ...</p></blockquote>
	<div><a href="http://hackecho.com/2011/11/thinking-of-multi-level-classification/">Read More...</a></div>
	</article>
  <h3 class="date">Thu 10 November 2011</h3>
    <article>
	<hgroup>
	<h2><a href="2011/11/login-to-linux-with-ssh/" title="Permalink to 用SSH远程登录Linux">用SSH远程登录Linux</a></h2>
	
	</hgroup>
	<p>今天配好服务器，发现如果直接远程连接主机无法打开控制台，于是果断采用SSH来登录。很简单，只需几步：</p>
<p>首先需要在服务器安装SSH的服务器端。</p>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">openssh</span><span class="o">-</span><span class="n">server</span>
</pre></div>


<p>Ubuntu中默认安装了OpenSSH的client端，我们不用重复安装。如果需要安装，只需将上述命令中的server改为client即可。</p>
<p>安装好后启动OpenSSH。</p>
<div class="codehilite"><pre><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">ssh</span> <span class="n">restart</span>
</pre></div>


<p>然后确认一下SSH Server是否启动。</p>
<div class="codehilite"><pre><span class="n">ps</span> <span class="o">-</span><span class="n">e</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">ssh</span>
</pre></div>


<p>如果只有ssh-agent那ssh-server还没有启动。</p>
<p>最后就是登录了：</p>
<div class="codehilite"><pre><span class="n">ssh</span> <span class="o">-</span><span class="n">l</span> <span class="n">username</span> 202<span class="p">.</span>112<span class="o">.***.***</span>
</pre></div>


<p>其中username是用户名，后面是服务器IP。</p>
<p>接下来会提示输入密码，然后就成功登录到服务器了。经测试，可以使用sudo -i取得管理员权限，可以执行脚本。哈哈，enjoy it！</p>
	<div><a href="http://hackecho.com/2011/11/login-to-linux-with-ssh/">Read More...</a></div>
	</article>
  <h3 class="date">Wed 09 November 2011</h3>
    <article>
	<hgroup>
	<h2><a href="2011/11/deployment-of-thinkphp/" title="Permalink to ThinkPHP部署二三事儿">ThinkPHP部署二三事儿</a></h2>
	
	</hgroup>
	<p>费尽周折，终于得以进入信息中心的机房一探究竟了。学校所有的服务器和托管服务器都在这里，内景也跟之前想象的差不多，整齐的一排排机柜，各种颜色的指示灯和密密麻麻的网线，还有很强大的冷却空调。不过唯一不爽的是巨大的噪音。</p>
<p>今天是去部署ThinkPHP刚做的一套系统，和安秦共同完成的。从上周六到今天，除了上课时间外火力全开，终于如期完成。当然还有不如意的地方，马上进入内测阶段，接受考验，哈哈。</p>
<p>简单总结一下今天遇到的各种奇奇怪怪的问题，经过我们五个小时的探索，还好都算解决了。不过也看出来自己真正薄弱的地方，下一步继续努力。</p>
<p>我们把原服务器格式化重新安装了Ubuntu 11.04。之前想安装Windows Server 2003，不过又想正好借机实践一下近期学的Linux知识，于是果断换了Ubuntu系统。考虑到使用方便问题，没有用Server版，桌面版够用。</p>
<p>安装的过程还算顺利，服务器配置很强大，跑个Ubuntu还是很顺利的。然后就遇到了第一个问题，也是我们今天遇到的最坑爹，最苦恼，最没有办法的问题。。</p>
<p>由于是内网部署，我们配好静态IP后，竟然发现不能访问！可以ping通，但访问时一直都是Forbidden状态。我们上网查各种方法来试图解决，都无法打通内网和外网这个桥梁。唯一能访问的知识同域内的几个网站，比如特思论坛。更痛苦的是无法连接上交大的开源镜像 ...</p>
	<div><a href="http://hackecho.com/2011/11/deployment-of-thinkphp/">Read More...</a></div>
	</article>
  <h3 class="date">Thu 13 October 2011</h3>
    <article>
	<hgroup>
	<h2><a href="2011/10/fixed-scroll-of-webpage/" title="Permalink to 页面滚动时层智能浮动定位的实现">页面滚动时层智能浮动定位的实现</a></h2>
	
	</hgroup>
	<p>你可能第一时间注意到了本博客的导航条在向上拉动页面时，如果导航条到了页面顶端便会自动停靠，我们称之为层的智能浮动效果。很早之前国外许多网站上已经开始使用这种效果。近年来国内许多门户也开始使用层的智能浮动来给用户带来更好的体验，如淘宝网搜索结果页的导航条，会自动浮动。再如下面的例子，是我们熟知的新浪微博的通知栏：</p>
<p><a href="/static/images/2011/10/previous.png"><img alt="" src="/static/images/2011/10/previous.png" /></a></p>
<p>当我们滑动网页时，可以看到如下效果：</p>
<p><a href="/static/images/2011/10/last.png"><img alt="" src="/static/images/2011/10/last.png" /></a></p>
<p>右上角的通知栏始终固定不动，不管网页怎么滑动。</p>
<p>当然，这并不完全是我们想要实现的效果，因为一开始，这个通知栏就是固定的，即CSS里定义position:fixed。我们想要实现的效果是，一开始素并不是固定的，而是随网页滚动的，只有当这个元素滚动到浏览器边缘时，才会固定不动，当页面又回滚到原来位置时，元素解除固定，继续随网页进行滚动，如本博客的导航栏一样。</p>
<p>下面我们就来利用jQuery实现这种效果。</p>
<p>当然，因为要用到jQuery，我们首先要做的就是引入jQuery文件：</p>
<div class="codehilite"><pre><span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js ...</span></pre></div>
	<div><a href="http://hackecho.com/2011/10/fixed-scroll-of-webpage/">Read More...</a></div>
	</article>

<p class="paginator">
						<a href="http://hackecho.com/category/develope3.html" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;newer</a>
						<a href="http://hackecho.com/category/develope5.html" class="button_accent" style="float:right; right: 0;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
	</p>

</section>
<div class="mobile-nav">
  <span class="nav-btn" id="mobile-nav-btn">
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
  </span>
  <h3>
    <a href="http://hackecho.com/" id="mobile-title">http://hackecho.com</a>
  </h3>
</div>

    <script src="http://hackecho.com/theme/gen/packed.js?0db83157"></script>

<script>
    // Function to get the Maximam value in Array
    Array.max = function( array ) {
        return Math.max.apply( Math, array );
    };

    var heights = [];
    heights.push($('.main-header').height());
    heights.push($('.main-section').height());
    heights.push($(window).height());

    var max_height = Array.max(heights);
    $('.main-header').height(max_height+80);

    $('#mobile-title').text(window.location.hostname);




</script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37227120-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>